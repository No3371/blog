<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.0.1">Jekyll</generator><link href="https://no3371.github.io/blog/feed.xml" rel="self" type="application/atom+xml" /><link href="https://no3371.github.io/blog/" rel="alternate" type="text/html" /><updated>2021-10-04T02:35:49+00:00</updated><id>https://no3371.github.io/blog/feed.xml</id><title type="html">#</title><subtitle>排放廢文 / Ranting
</subtitle><author><name>BA</name></author><entry><title type="html">Hosting A Web Service on Vultr</title><link href="https://no3371.github.io/blog/posts/hosting-a-web-service-on-vultr/en" rel="alternate" type="text/html" title="Hosting A Web Service on Vultr" /><published>2021-10-02T00:00:00+00:00</published><updated>2021-10-02T00:00:00+00:00</updated><id>https://no3371.github.io/blog/posts/hosting-a-web-service-on-vultr/hosting-a-web-service-on-vultr</id><content type="html" xml:base="https://no3371.github.io/blog/posts/hosting-a-web-service-on-vultr/en">&lt;p&gt;I just started hosting a private web service on &lt;a href=&quot;https://vultr.com&quot;&gt;Vultr&lt;/a&gt;, a VPS provider, for my own convenience.&lt;/p&gt;

&lt;p&gt;Though It has been 1~2 years since I started messing with stuff like tcp, http, server development, nginx…  I’ve never really touch some of the key parts: how domain name works, how to configure dns, how to properly setup a web server machine.&lt;/p&gt;

&lt;p&gt;It’s quite a learning experience that worth a blog post, so here we go.&lt;/p&gt;

&lt;h2 id=&quot;vps-provider-vultr&quot;&gt;VPS Provider: Vultr&lt;/h2&gt;

&lt;p&gt;I’ve been dealing with GCP in last 2 years, actually GCP is the only cloud provider I’ve ever tried, and the experience is not so good:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The console is very powerful, very complicated, and very fragmented. It’s packed with all sort of cloud stuff Google provides, and a lot of the products are left untouched most of the time, while still being there, costing your attention.&lt;/li&gt;
  &lt;li&gt;IMO, the UI is confusing, mainly becuase all the infomation is dumped on you, and most of the text elements are of same size.&lt;/li&gt;
  &lt;li&gt;Also, the UI is kinda slow in my experience, and we usually have to move between tabs a lot, which makes the slowness prominent.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;The pricing is very complicated and dynamic.&lt;/strong&gt; It’s a really good concept to devide all things up and charge separately according to usages, but it’s not quite friendly to users. I recently found that I have several disks of deleted vm that had been charging me for several months. Had I not noticed the money I &lt;strong&gt;paid&lt;/strong&gt; was surpirsing, I may never notice.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Vultr is mainly about VPS, not much more, the UI is clean and easy to navigate.&lt;/p&gt;

&lt;p&gt;As fo pricing, it’s cool. Vultr asks you deposit first, and it adopts fixed pricing model. I feel at ease knowing that my deposited $10 will run my machine for about 2 months.&lt;/p&gt;

&lt;p&gt;The machine deployment is straightforward, complete the form and push the deploy button, it’ll start doing it job. In minutes, the machine’d be ready for you to ssh into it from your machine or the web console.&lt;/p&gt;

&lt;h2 id=&quot;domain-registrar-namecheap&quot;&gt;Domain Registrar: Namecheap&lt;/h2&gt;

&lt;p&gt;From time to time, I’d feel an urge to buy a domain for my idea, but had never really done once.&lt;/p&gt;

&lt;p&gt;I decided to buy my domains on &lt;a href=&quot;https://namecheap.com&quot;&gt;Namecheap&lt;/a&gt;, the buying part is easy, just filling forms and paying the money.&lt;/p&gt;

&lt;p&gt;The hard part for me is configuring the DNS records. I have a mediocre understanding of how DNS works, but I knows n0thing about how to set it up… What is DNS record? And What are A, AAAA, CNAME, MX, SRV?&lt;/p&gt;

&lt;p&gt;Googled them. Tried and errors. Hours gone. &lt;strong&gt;The key missing piece is that I don’t know that domain names point to IP, not IP:port, this one cost me quite some time to figure out.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;It’s actually not complicated at all, at least for my purpose. The only 1 &lt;em&gt;DNS Record&lt;/em&gt; needed is:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;A RECORD: It decides what IP the domain points to. The &lt;code class=&quot;highlighter-rouge&quot;&gt;Name&lt;/code&gt; of a &lt;em&gt;A Record&lt;/em&gt; means subdomain, the &lt;code class=&quot;highlighter-rouge&quot;&gt;Data&lt;/code&gt; is the IP address it points to.
For example, if we setup a record whose Name is &lt;code class=&quot;highlighter-rouge&quot;&gt;blog&lt;/code&gt;, Data is &lt;code class=&quot;highlighter-rouge&quot;&gt;1.2.3.4&lt;/code&gt;. Assuming the registered domain is &lt;code class=&quot;highlighter-rouge&quot;&gt;cool.xyz&lt;/code&gt;, when we try to connect to &lt;code class=&quot;highlighter-rouge&quot;&gt;blog.cool.xyz&lt;/code&gt;, the DNS tells our computer to go to &lt;code class=&quot;highlighter-rouge&quot;&gt;1.2.3.4&lt;/code&gt;.
If it’s an IPV6 address, use &lt;em&gt;AAAA Record&lt;/em&gt; instead.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The Namecheap experience is smooth, interfaces are easy to use and stuff are easy to understance. I’ve never tried other registrars, so nothing to complain.&lt;/p&gt;

&lt;h2 id=&quot;setting-up-the-machine&quot;&gt;Setting Up The Machine&lt;/h2&gt;

&lt;p&gt;The most familiar Linux OS for me is CentOS, so that’s what loaded on the mechine deployed on Vultr.&lt;/p&gt;

&lt;p&gt;Some random notes:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;~/.ssh/authorized_keys&lt;/code&gt; is a file not a directory.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;setting-up-nginx&quot;&gt;Setting up Nginx&lt;/h3&gt;

&lt;p&gt;To route http packets to the web service listening to another port, a web server listening to 80 or 443 is required. &lt;a href=&quot;https://nginx.org&quot;&gt;Nginx&lt;/a&gt; is my most familiar tool so it’s a no-brainer for me.&lt;/p&gt;

&lt;p&gt;The installation steps:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;yum install nginx&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;systemctl enable nginx&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Wrote a .conf file to proxy http packets to my web service in &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/nginx/conf.d&lt;/code&gt; so it gets included to http block in &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/nginx/nginx.conf&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Things I learned:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;By default, Nginx has a timeout of 60 seconds when proxying packets. configs like &lt;code class=&quot;highlighter-rouge&quot;&gt;proxy_send_timeout 1h&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;proxy_read_timeout 1h&lt;/code&gt; are useful.&lt;/li&gt;
  &lt;li&gt;For &lt;code class=&quot;highlighter-rouge&quot;&gt;proxy_pass&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;localhost&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;127.0.0.1&lt;/code&gt; is different.&lt;/li&gt;
  &lt;li&gt;The location block name is not only used to match url, but also what gets stripped to upstream url.&lt;br /&gt;
For easier understanding, take a look at the pseudo conf, notice the difference in location name:
    &lt;div class=&quot;language-conf highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;n&quot;&gt;server&lt;/span&gt; {
      &lt;span class=&quot;n&quot;&gt;server_name&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;123&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;com&lt;/span&gt;;
      &lt;span class=&quot;n&quot;&gt;location&lt;/span&gt; /&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;/ {
          &lt;span class=&quot;n&quot;&gt;proxy_pass&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;127&lt;/span&gt;.&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;.&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;.&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;m&quot;&gt;1234&lt;/span&gt;;
      }

      &lt;span class=&quot;n&quot;&gt;location&lt;/span&gt; /&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;/ {
          &lt;span class=&quot;n&quot;&gt;proxy_pass&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;127&lt;/span&gt;.&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;.&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;.&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;:&lt;span class=&quot;m&quot;&gt;1234&lt;/span&gt;/;
      }
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;p&gt;When a request to &lt;code class=&quot;highlighter-rouge&quot;&gt;123.com/a/b&lt;/code&gt; arrived, the fist location block would proxy it to &lt;code class=&quot;highlighter-rouge&quot;&gt;127.0.0.1:1234/a/b&lt;/code&gt;, while the second one would proxy it to &lt;code class=&quot;highlighter-rouge&quot;&gt;127.0.0.1:1234/b&lt;/code&gt;.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;make-it-a-systemd-service&quot;&gt;Make It a Systemd Service&lt;/h3&gt;

&lt;p&gt;The web service I’m hosting is a single-file excutable, I just drop it into &lt;code class=&quot;highlighter-rouge&quot;&gt;/usr/local/bin&lt;/code&gt; which I learned is a goto place for binaries not installed with package managers, it’ll also make things easier on SELinux enabled machine, we’ll &lt;a href=&quot;#dealing-with-selinux&quot;&gt;cover this later&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I need the web service to auto start on boot and auto restart if any failure happens, it seems the simplest way is create a new systemd service config for it.&lt;/p&gt;

&lt;p&gt;Just write a file like this into &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/systemd/system&lt;/code&gt;, the naming convention is &lt;code class=&quot;highlighter-rouge&quot;&gt;NAME.service&lt;/code&gt;,&lt;/p&gt;

&lt;div class=&quot;language-ini highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;py&quot;&gt;Description&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;DUCT&lt;/span&gt;

&lt;span class=&quot;py&quot;&gt;Wants&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;network.target&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;After&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;syslog.target network-online.target&lt;/span&gt;

&lt;span class=&quot;nn&quot;&gt;[Service]&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;root&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;ExecStart&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/bin/bash -c &quot;/usr/local/bin/duct serve&quot;&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;RestartSec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;6s&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;Restart&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;on-failure&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;KillMode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;process&lt;/span&gt;

&lt;span class=&quot;nn&quot;&gt;[Install]&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;WantedBy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;multi-user.target&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;The pitfall here is make sure the ExecStart is formatted as &lt;code class=&quot;highlighter-rouge&quot;&gt;/bin/bash -c &quot;command&quot;&lt;/code&gt; event if it’s already an executable, otherwise It’ll keep dying without telling you why.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;After the file is in place, enabling the service with &lt;code class=&quot;highlighter-rouge&quot;&gt;systemctl enable NAME.service&lt;/code&gt;, this makes it start on boot, but does not start it immediately.&lt;/p&gt;

&lt;p&gt;To start it immediately, do &lt;code class=&quot;highlighter-rouge&quot;&gt;systemctl start NAME.service&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The above &lt;code class=&quot;highlighter-rouge&quot;&gt;NAME.service&lt;/code&gt; used in the commands can be abbrevated to &lt;code class=&quot;highlighter-rouge&quot;&gt;NAME&lt;/code&gt;.&lt;/p&gt;

&lt;h3 id=&quot;good-to-go&quot;&gt;Good to Go?&lt;/h3&gt;

&lt;p&gt;With DNS, Nginx and my web service set-up, I thought I was ready to go… But no, I can’t connect to my web service.&lt;/p&gt;

&lt;h2 id=&quot;dealing-with-selinux&quot;&gt;Dealing with SELinux&lt;/h2&gt;

&lt;p&gt;Though &lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;The most familiar Linux OS for me is CentOS&quot;&lt;/code&gt; I’ve never confronting SELinux before! It’s… annoying. But I appreciate the strictness so I decided to stick to it, not disabling it.&lt;/p&gt;

&lt;h3 id=&quot;where-is-it&quot;&gt;Where Is It&lt;/h3&gt;

&lt;p&gt;In one of the previous sections, I mentioned that placing executables in &lt;code class=&quot;highlighter-rouge&quot;&gt;/usr/local/bin&lt;/code&gt; is helpful.&lt;/p&gt;

&lt;p&gt;SELinux maintains context of files. For example, if I place my &lt;code class=&quot;highlighter-rouge&quot;&gt;duct&lt;/code&gt; in like &lt;code class=&quot;highlighter-rouge&quot;&gt;/home&lt;/code&gt;, it won’t work, the execution would be denied by SELinux, because according to the configured contexts, execution happening in &lt;code class=&quot;highlighter-rouge&quot;&gt;/home&lt;/code&gt; is not allowed.&lt;/p&gt;

&lt;p&gt;A lot of the default paths are pre-configured, and I like the idea to stick to vanilla settings, so I chose to place my executable to &lt;code class=&quot;highlighter-rouge&quot;&gt;/usr/local/bin&lt;/code&gt;. (Actually, this is the first time I really google about where should stuff go, and found a good post)&lt;/p&gt;

&lt;p&gt;If you are interested with how to mess with file contexts, here is a &lt;a href=&quot;https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html/security-enhanced_linux/sect-security-enhanced_linux-selinux_contexts_labeling_files-persistent_changes_semanage_fcontext&quot;&gt;link to the documentation&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;But one more thing had to be done, when we move something into &lt;code class=&quot;highlighter-rouge&quot;&gt;/usr/local/bin&lt;/code&gt;, SELinux won’t know that thing is now in a valid place to be executed.&lt;/p&gt;

&lt;p&gt;I ran &lt;code class=&quot;highlighter-rouge&quot;&gt;restorecon -rv /usr/local/bin/duct&lt;/code&gt; to update it, so it’s now allowed to be execute there.&lt;/p&gt;

&lt;h3 id=&quot;connection-denied&quot;&gt;Connection Denied&lt;/h3&gt;
&lt;p&gt;What was happening is even if I was doing curl from the machine itself, it’s not proxied to the web service, instead, Nginx would throw &lt;code class=&quot;highlighter-rouge&quot;&gt;502 Bad Gateway&lt;/code&gt; at me.&lt;/p&gt;

&lt;p&gt;This is very weird. I wen to take a look at &lt;code class=&quot;highlighter-rouge&quot;&gt;/var/log/nginx/error.log&lt;/code&gt;, it was something like this:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;[crit] 3684#0: *56 connect() to [::1]:1234 failed (13: Permission denied) while connecting to upstream, client: 123.123.123.123, server: sub.1234.com, request: “GET /duct/1 HTTP/1.1”, upstream: “http://[::1]:1234/1”, host: “sub.1234.com”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Okay, &lt;code class=&quot;highlighter-rouge&quot;&gt;(13: Permission denied)&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;There’s such a file &lt;code class=&quot;highlighter-rouge&quot;&gt;/var/log/audit/audit.log&lt;/code&gt; that contains logs of what the audit system done. I took a look, found something looks like this:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;type=AVC msg=audit(1633183449.281:813): avc:  denied  { name_connect } for  pid=3684 comm=&quot;nginx&quot; dest=9002 scontext=system_u:system_r:httpd_t:s0 tcontext=system_u:object_r:http_port_t:s0 tclass=tcp_socket permissive=0
type=SYSCALL msg=audit(1633183449.281:813): arch=c000003e syscall=42 success=no exit=-13 a0=12 a1=560edfc92af0 a2=10 a3=7fff7e08e13c items=0 ppid=3683 pid=3684 auid=4294967295 uid=989 gid=985 euid=989 suid=989 fsuid=989 egid=985 sgid=985 fsgid=985 tty=(none) ses=4294967295 comm=&quot;nginx&quot; exe=&quot;/usr/sbin/nginx&quot; subj=system_u:system_r:httpd_t:s0 key=(null)ARCH=x86_64 SYSCALL=connect AUID=&quot;unset&quot; UID=&quot;nginx&quot; GID=&quot;nginx&quot; EUID=&quot;nginx&quot; SUID=&quot;nginx&quot; FSUID=&quot;nginx&quot; EGID=&quot;nginx&quot; SGID=&quot;nginx&quot; FSGID=&quot;nginx&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;What a gibberish. With &lt;code class=&quot;highlighter-rouge&quot;&gt;ausearch -m avc -i&lt;/code&gt; we can get a more readable version:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-log&quot;&gt;type=PROCTITLE msg=audit(10/02/2021 22:04:09.281:814) : proctitle=nginx: worker process
type=SYSCALL msg=audit(10/02/2021 22:04:09.281:814) : arch=x86_64 syscall=connect success=no exit=EACCES(Permission denied) a0=0x12 a1=0x560edfc92b18 a2=0x1c a3=0x7fff7e08e13c items=0 ppid=3683 pid=3684 auid=unset uid=nginx gid=nginx euid=nginx suid=nginx fsuid=nginx egid=nginx sgid=nginx fsgid=nginx tty=(none) ses=unset comm=nginx exe=/usr/sbin/nginx subj=system_u:system_r:httpd_t:s0 key=(null)
type=AVC msg=audit(10/02/2021 22:04:09.281:814) : avc:  denied  { name_connect } for  pid=3684 comm=nginx dest=1234 scontext=system_u:system_r:httpd_t:s0 tcontext=system_u:object_r:port_t:s0 tclass=tcp_socket permissive=0
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
  &lt;li&gt;Nginx was doing a &lt;code class=&quot;highlighter-rouge&quot;&gt;connect&lt;/code&gt; syscall, but has no permission to do it.
    &lt;blockquote&gt;
      &lt;p&gt;syscall=connect success=no exit=EACCES(Permission denied)&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
  &lt;li&gt;The actual denied action was &lt;code class=&quot;highlighter-rouge&quot;&gt;name_connect&lt;/code&gt;.
    &lt;blockquote&gt;
      &lt;p&gt;avc:  denied  { name_connect }&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
  &lt;li&gt;Nginx is a httpd.
    &lt;blockquote&gt;
      &lt;p&gt;exe=/usr/sbin/nginx subj=system_u:system_r:httpd_t:s0&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
  &lt;li&gt;The target is a normal tcp port, which is what my web service listens to.
    &lt;blockquote&gt;
      &lt;p&gt;tcontext=system_u:object_r:port_t:s0&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;name_connect&lt;/code&gt; by http_d to a tcp port is not allowed.
    &lt;blockquote&gt;
      &lt;p&gt;permissive=0&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Great, but how do we know what does it allow?&lt;/p&gt;

&lt;p&gt;We can do &lt;code class=&quot;highlighter-rouge&quot;&gt;sesearch --allow -s httpd_t | grep name_connect&lt;/code&gt; to further investigate, the &lt;code class=&quot;highlighter-rouge&quot;&gt;sesearch&lt;/code&gt; plugin would output all rules which apply to action comes from a httpd and is an allow rule, then the &lt;code class=&quot;highlighter-rouge&quot;&gt;grep&lt;/code&gt; filters lines contains &lt;code class=&quot;highlighter-rouge&quot;&gt;name_connect&lt;/code&gt; for us.&lt;/p&gt;

&lt;p&gt;The output should looks like:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;...
allow httpd_t http_port_t:tcp_socket name_connect; [ httpd_can_network_relay ]:True
...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The line is saying that if &lt;code class=&quot;highlighter-rouge&quot;&gt;httpd_can_network_relay&lt;/code&gt; is true, &lt;code class=&quot;highlighter-rouge&quot;&gt;name_connect&lt;/code&gt; from a httpd to any port of &lt;code class=&quot;highlighter-rouge&quot;&gt;http_port_t&lt;/code&gt; is allowed. There was no line starts with &lt;code class=&quot;highlighter-rouge&quot;&gt;allow httpd_t port_t:tcp_socket&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;So it’s much clear about what happened. So, to solve this, we need to enable the option &lt;code class=&quot;highlighter-rouge&quot;&gt;httpd_can_network_relay&lt;/code&gt; first with &lt;code class=&quot;highlighter-rouge&quot;&gt;setsebool -P  httpd_can_network_relay on&lt;/code&gt; (-P means it does not revert after reboot)&lt;/p&gt;

&lt;p&gt;Then we have 2 options:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Allow httpd do &lt;code class=&quot;highlighter-rouge&quot;&gt;name_connect&lt;/code&gt; to all tcp port.&lt;/li&gt;
  &lt;li&gt;Add the port we want to &lt;code class=&quot;highlighter-rouge&quot;&gt;http_port_t&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Comparing the two, it’s very easy to comes to a conclusion that, the second one, which allows 1 more tcp port to be connected, is much safer than the first one, which allows all tcp ports to be connected.&lt;/p&gt;

&lt;p&gt;If we do &lt;code class=&quot;highlighter-rouge&quot;&gt;semanage port -l | grep http_port_t&lt;/code&gt;, we can see all the ports belonging to &lt;code class=&quot;highlighter-rouge&quot;&gt;http_port_t&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;To add a port to &lt;code class=&quot;highlighter-rouge&quot;&gt;http_port_t&lt;/code&gt;, do &lt;code class=&quot;highlighter-rouge&quot;&gt;semanage port -a -t http_port_t -p tcp [PORT NUMBER]&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The permission issue was fixed.&lt;/p&gt;

&lt;h3 id=&quot;firewalld&quot;&gt;Firewalld&lt;/h3&gt;

&lt;p&gt;After all these done, it still did not work. What could still be wrong… after all these obstacles I overcame?&lt;/p&gt;

&lt;p&gt;The good old firewall.&lt;/p&gt;

&lt;p&gt;What was happening is that  &lt;em&gt;curl&lt;/em&gt; says &lt;code class=&quot;highlighter-rouge&quot;&gt;No route to host&lt;/code&gt;  when I told it to connect to my domain. The message sounds very much like a DNS issue, or like the machine is not exposed to internet… Hey, that means there’s no route to get to my domain, is it?&lt;/p&gt;

&lt;p&gt;Firewalld can be adjusted with &lt;code class=&quot;highlighter-rouge&quot;&gt;firewall-cmd&lt;/code&gt;, I did these to open the door:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;firewall-cmd --list-all&lt;/code&gt;, from the output it seems that 80 (http) is not allowed&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;firewall-cmd --permanent --add-service=http&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;firewall-cmd --reload&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;firewall-cmd --permanent --list-services&lt;/code&gt;, now the output shows that http is enabled&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Bingo! My web service is online.&lt;/strong&gt;&lt;/p&gt;</content><author><name>BA</name></author><category term="web" /><category term="linux" /><summary type="html">I just started hosting a private web service on Vultr, a VPS provider, for my own convenience.</summary></entry><entry><title type="html">Unity: iOS PVRTC Compression Requires Square Textures</title><link href="https://no3371.github.io/blog/posts/unity-ios-pvrtc-compression-requires-square-textures/en" rel="alternate" type="text/html" title="Unity: iOS PVRTC Compression Requires Square Textures" /><published>2021-09-23T00:00:00+00:00</published><updated>2021-09-23T00:00:00+00:00</updated><id>https://no3371.github.io/blog/posts/unity-ios-pvrtc-compression-requires-square-textures/unity-ios-pvrtc-compression-requires-square-textures</id><content type="html" xml:base="https://no3371.github.io/blog/posts/unity-ios-pvrtc-compression-requires-square-textures/en">&lt;p&gt;Today my collegue noticed that same animation looks different on iOS and Android, after digging around for a short period, we figured that the related atlas has different imported size on Android &amp;amp; iOS.&lt;/p&gt;

&lt;p&gt;It seems that by default, Unity select PVRTC compression format for iOS to support older devices (~2013). PVRTC format requires square textures, &lt;strong&gt;if the texture is not square, Unity stretch it without warning you.&lt;/strong&gt; For not-so-old (2014~) iOS devices, ATSC is recommened and it supports non-square textures.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.unity3d.com/Manual/class-TextureImporterOverride.html&quot;&gt;Source&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;iOS and tvOS
For Apple devices that use the A8 chip (2014) or above, ATSC is the recommended texture compression format for RGB and RGBA textures. This format allows you to choose between texture quality and size on a granular level: all the way from eight bits/pixel (4x4 block size) down to 0.89 bits/pixel (12x12 block size). If support for older devices is needed, or you want additional Crunch compression, then Apple devices support ETC/ETC2 formats starting with A7 chip (2013). For even older devices, PVRTC is the compression format to use. On iOS, Unity’s default texture compression format is PVRTC, for the broadest possible compatibility. ASTC is preferred, but is not supported on A7 devices (the very first Metal-enabled devices) and will be unpacked at runtime.&lt;/p&gt;
&lt;/blockquote&gt;</content><author><name>BA</name></author><category term="unity" /><category term="pitfall" /><summary type="html">Today my collegue noticed that same animation looks different on iOS and Android, after digging around for a short period, we figured that the related atlas has different imported size on Android &amp;amp; iOS. It seems that by default, Unity select PVRTC compression format for iOS to support older devices (~2013). PVRTC format requires square textures, if the texture is not square, Unity stretch it without warning you. For not-so-old (2014~) iOS devices, ATSC is recommened and it supports non-square textures. Source: iOS and tvOS For Apple devices that use the A8 chip (2014) or above, ATSC is the recommended texture compression format for RGB and RGBA textures. This format allows you to choose between texture quality and size on a granular level: all the way from eight bits/pixel (4x4 block size) down to 0.89 bits/pixel (12x12 block size). If support for older devices is needed, or you want additional Crunch compression, then Apple devices support ETC/ETC2 formats starting with A7 chip (2013). For even older devices, PVRTC is the compression format to use. On iOS, Unity’s default texture compression format is PVRTC, for the broadest possible compatibility. ASTC is preferred, but is not supported on A7 devices (the very first Metal-enabled devices) and will be unpacked at runtime.</summary></entry><entry><title type="html">Git 客戶端換用 Fork 快到起飛</title><link href="https://no3371.github.io/blog/posts/fork-goes-brrrrrrr/tw" rel="alternate" type="text/html" title="Git 客戶端換用 Fork 快到起飛" /><published>2021-09-23T00:00:00+00:00</published><updated>2021-09-23T00:00:00+00:00</updated><id>https://no3371.github.io/blog/posts/fork-goes-brrrrrrr/fork-goes-brrrrrrr</id><content type="html" xml:base="https://no3371.github.io/blog/posts/fork-goes-brrrrrrr/tw">&lt;p&gt;這兩三年來我一直是忠實的 GitKraken 使用者，我真的很喜歡它的 UI/UX 跟使用體驗，甚至熱情地推薦給很多人——雖然一隻手數得過來，但對我來說已經很多了，畢竟我實在是沒幾個朋友。&lt;/p&gt;

&lt;p&gt;但是！GitKraken 是有名地慢，尤其是開啟大 Repo 的時候其效能出奇地差，最早的討論甚至可以追溯到&lt;a href=&quot;https://github.com/git-cola/git-cola/issues/48&quot;&gt;十年前&lt;/a&gt;。我在一間不算小的公司工作，會碰到一些肥大的專案，有時候光是程式碼就高達數十 mb，在這些專案使用 GitKraken 簡直是一種折磨。&lt;/p&gt;

&lt;p&gt;光是顯示單一個檔案的內容就可以跑好幾秒鐘，這完全沒辦法幫它找到正當的理由……說真的，三小？就連 🗒記事本 都比它快，讀取檔案內容根本不需要經由 git 吧？到底在跑什麼？我真的不知道這幾年我哪來的耐心跟它耗。&lt;/p&gt;

&lt;p&gt;一直以來， 我時不時都會搜尋替代的 Git 客戶端，希望能找到擁有跟 GitKraken 一樣棒的 UI/UX 的新選擇，這很重要，不然我寧可直接用 Git Cli，就當作順便訓練自己成為 Git 大師。很可惜我一直沒找到，不得不說，GitKraken 的介面難以取代，所以我一直沒嘗試過別的客戶端。&lt;/p&gt;

&lt;p&gt;但現在我真的是受不了了，每個點擊都要花好幾秒才有反應，簡直是效率/體驗毀滅者，也像是在羞辱這幾年每年為了 GitKraken 付費的我。所以我去了官方 &lt;a href=&quot;https://git-scm.com/downloads/guis&quot;&gt;GUI Clients&lt;/a&gt;清單血拚，最後選擇了 &lt;a href=&quot;https://git-fork.com/&quot;&gt;Fork&lt;/a&gt;。它的官網標榜 &lt;code class=&quot;highlighter-rouge&quot;&gt;Fast and Friendly&lt;/code&gt;還真是沒在蓋的，就連 UI/UX 都比我想像中還要優秀得多。&lt;/p&gt;

&lt;p&gt;順帶一提，有一款叫做 Ungit 用 node js 寫的 web 客戶端，應該是單緒執行，連這東西都跑得比 GitKraken 還快……我的天……&lt;/p&gt;</content><author><name>BA</name></author><category term="git" /><summary type="html">這兩三年來我一直是忠實的 GitKraken 使用者，我真的很喜歡它的 UI/UX 跟使用體驗，甚至熱情地推薦給很多人——雖然一隻手數得過來，但對我來說已經很多了，畢竟我實在是沒幾個朋友。 但是！GitKraken 是有名地慢，尤其是開啟大 Repo 的時候其效能出奇地差，最早的討論甚至可以追溯到十年前。我在一間不算小的公司工作，會碰到一些肥大的專案，有時候光是程式碼就高達數十 mb，在這些專案使用 GitKraken 簡直是一種折磨。 光是顯示單一個檔案的內容就可以跑好幾秒鐘，這完全沒辦法幫它找到正當的理由……說真的，三小？就連 🗒記事本 都比它快，讀取檔案內容根本不需要經由 git 吧？到底在跑什麼？我真的不知道這幾年我哪來的耐心跟它耗。 一直以來， 我時不時都會搜尋替代的 Git 客戶端，希望能找到擁有跟 GitKraken 一樣棒的 UI/UX 的新選擇，這很重要，不然我寧可直接用 Git Cli，就當作順便訓練自己成為 Git 大師。很可惜我一直沒找到，不得不說，GitKraken 的介面難以取代，所以我一直沒嘗試過別的客戶端。 但現在我真的是受不了了，每個點擊都要花好幾秒才有反應，簡直是效率/體驗毀滅者，也像是在羞辱這幾年每年為了 GitKraken 付費的我。所以我去了官方 GUI Clients清單血拚，最後選擇了 Fork。它的官網標榜 Fast and Friendly還真是沒在蓋的，就連 UI/UX 都比我想像中還要優秀得多。 順帶一提，有一款叫做 Ungit 用 node js 寫的 web 客戶端，應該是單緒執行，連這東西都跑得比 GitKraken 還快……我的天……</summary></entry><entry><title type="html">Learning C#: Bit-Twiddling-Abs</title><link href="https://no3371.github.io/blog/posts/learning-csharp-bittwiddling/en" rel="alternate" type="text/html" title="Learning C#: Bit-Twiddling-Abs" /><published>2021-08-26T00:00:00+00:00</published><updated>2021-08-26T00:00:00+00:00</updated><id>https://no3371.github.io/blog/posts/learning-csharp-bittwiddling/learning-csharp-bittwiddling</id><content type="html" xml:base="https://no3371.github.io/blog/posts/learning-csharp-bittwiddling/en">&lt;p&gt;NOTE: C# numbers are stored in 2’s complement.&lt;/p&gt;

&lt;p&gt;We’ll use int (32bit) P = 17 (&lt;code class=&quot;highlighter-rouge&quot;&gt;0000 0000 0000 0000 0000 0000 0001 0001&lt;/code&gt;) and N = -17 (&lt;code class=&quot;highlighter-rouge&quot;&gt;1111 1111 1111 1111 1111 1111 1110 1111&lt;/code&gt;) to demonstrate.&lt;/p&gt;

&lt;h3 id=&quot;extract-the-sign-bit&quot;&gt;Extract the sign bit&lt;/h3&gt;

&lt;p&gt;We shift 32 bits right to get the sign bit:&lt;/p&gt;

&lt;div class=&quot;language-csharp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;step1N&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;17&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;31&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// = -1, 1111 1111 1111 1111 1111 1111 1111 1111&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;step1P&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;  &lt;span class=&quot;m&quot;&gt;17&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;31&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// = 0,  0000 0000 0000 0000 0000 0000 0000 0000&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;xor-the-original-value-and-the-mask&quot;&gt;XOR the original value and the mask&lt;/h3&gt;

&lt;p&gt;XOR means output 1 if the bits are different.&lt;/p&gt;
&lt;div class=&quot;language-csharp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;step2N&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;17&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;^&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;step1N&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// The leftmost bit of -17 is 1, the the one of step1N is also 1, they are the same, so the XOR result bit would be 0, which makes the value positive.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// After XOR, step2N is now `0000 0000 0000 0000 0000 0000 0001 0000`, which is 16&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;step2P&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;  &lt;span class=&quot;m&quot;&gt;17&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;^&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;step1P&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// The leftmost bit of 17 is 0, the the one of step1P is also 0, they are the same, so the XOR result bit would be 0, which is not changed (17 is positive too).&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// After XOR, step2P is now `0000 0000 0000 0000 0000 0000 0001 0001`, which is 17&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;subtact-the-step2-values&quot;&gt;Subtact the step2 values&lt;/h3&gt;

&lt;p&gt;We need to adjust the value for N to makes the abs result correct.&lt;/p&gt;
&lt;div class=&quot;language-csharp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;absN&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;step2N&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;step1N&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// = 17, 16 - -1&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;absP&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;step2P&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;step1P&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// = 17, 17 - 0&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// As you can see, this step does not modify the result if the original value is positive.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;not-safe-intminvalue&quot;&gt;Not Safe: int.MinValue&lt;/h3&gt;

&lt;p&gt;Let’s perform the above technique for &lt;code class=&quot;highlighter-rouge&quot;&gt;int.MinValue&lt;/code&gt;, -2147483648, which is &lt;code class=&quot;highlighter-rouge&quot;&gt;1000 0000 0000 0000 0000 0000 0000 0000&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-csharp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2147483648&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;31&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// -1, 1111 1111 1111 1111 1111 1111 1111 1111&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2147483648&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;^&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// The leftmost bit of -17 is 1, the the one of step1N is also 1, they are the same, so the XOR result bit would be 0, which makes the value positive.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// After XOR, x is now 0111 1111 1111 1111 1111 1111 1111 1111, which is 2147483647, the `int.MaxValue`&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// it's supposed to be 2147483647+1, but 2147483647 is already `int.MaxValue`, this will results in a overflow, makes it again -2147483648.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So if the value is possibliy &lt;code class=&quot;highlighter-rouge&quot;&gt;int.MinValue&lt;/code&gt;, we have to avoid using this trick.&lt;/p&gt;

&lt;p&gt;Also, this does not necessarily makes your program faster because modern compiler is good at optimization, it’s often faster then manual optimization.&lt;/p&gt;</content><author><name>BA</name></author><category term="csharp" /><summary type="html">NOTE: C# numbers are stored in 2’s complement. We’ll use int (32bit) P = 17 (0000 0000 0000 0000 0000 0000 0001 0001) and N = -17 (1111 1111 1111 1111 1111 1111 1110 1111) to demonstrate. Extract the sign bit We shift 32 bits right to get the sign bit: int step1N = -17 &amp;gt;&amp;gt; 31; // = -1, 1111 1111 1111 1111 1111 1111 1111 1111 int step1P = 17 &amp;gt;&amp;gt; 31; // = 0, 0000 0000 0000 0000 0000 0000 0000 0000 XOR the original value and the mask XOR means output 1 if the bits are different. int step2N = -17 ^ step1N; // The leftmost bit of -17 is 1, the the one of step1N is also 1, they are the same, so the XOR result bit would be 0, which makes the value positive. // After XOR, step2N is now `0000 0000 0000 0000 0000 0000 0001 0000`, which is 16 int step2P = 17 ^ step1P; // The leftmost bit of 17 is 0, the the one of step1P is also 0, they are the same, so the XOR result bit would be 0, which is not changed (17 is positive too). // After XOR, step2P is now `0000 0000 0000 0000 0000 0000 0001 0001`, which is 17 Subtact the step2 values We need to adjust the value for N to makes the abs result correct. int absN = step2N - step1N; // = 17, 16 - -1 int absP = step2P - step1P; // = 17, 17 - 0 // As you can see, this step does not modify the result if the original value is positive. Not Safe: int.MinValue Let’s perform the above technique for int.MinValue, -2147483648, which is 1000 0000 0000 0000 0000 0000 0000 0000. int x = -2147483648 &amp;gt;&amp;gt; 31; // -1, 1111 1111 1111 1111 1111 1111 1111 1111 x = -2147483648 ^ x; // The leftmost bit of -17 is 1, the the one of step1N is also 1, they are the same, so the XOR result bit would be 0, which makes the value positive. // After XOR, x is now 0111 1111 1111 1111 1111 1111 1111 1111, which is 2147483647, the `int.MaxValue` x = x - -1; // it's supposed to be 2147483647+1, but 2147483647 is already `int.MaxValue`, this will results in a overflow, makes it again -2147483648. So if the value is possibliy int.MinValue, we have to avoid using this trick. Also, this does not necessarily makes your program faster because modern compiler is good at optimization, it’s often faster then manual optimization.</summary></entry><entry><title type="html">Free &amp;amp; Private PushBullet with PatchBay</title><link href="https://no3371.github.io/blog/posts/free-private-pushbullet-with-patchbay/en" rel="alternate" type="text/html" title="Free &amp;amp; Private PushBullet with PatchBay" /><published>2021-08-20T00:00:00+00:00</published><updated>2021-08-20T00:00:00+00:00</updated><id>https://no3371.github.io/blog/posts/free-private-pushbullet-with-patchbay/free-private-pushbullet-with-patchbay</id><content type="html" xml:base="https://no3371.github.io/blog/posts/free-private-pushbullet-with-patchbay/en">&lt;p&gt;&lt;a href=&quot;https://patchbay.pub&quot;&gt;PatchBay&lt;/a&gt; is a free and public service that “patch” Http &lt;code class=&quot;highlighter-rouge&quot;&gt;GET&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;POST&lt;/code&gt; together. For example, you &lt;code class=&quot;highlighter-rouge&quot;&gt;GET&lt;/code&gt; from &lt;code class=&quot;highlighter-rouge&quot;&gt;https://patchbay.pub/123&lt;/code&gt; and POST “321” to &lt;code class=&quot;highlighter-rouge&quot;&gt;https://patchbay.pub/123&lt;/code&gt;, the &lt;code class=&quot;highlighter-rouge&quot;&gt;GET&lt;/code&gt; side will receive “321”.&lt;/p&gt;

&lt;p&gt;Sounds boring, eh? But it could be the most clever thing I’ve seen these years, and it’s free for anyone to use without any authentication, which enable a lot of possibilities.&lt;/p&gt;

&lt;p&gt;I’ve made several personal tools based on PatchBay, for example, PushBullet:&lt;/p&gt;

&lt;noscript&gt;&lt;pre&gt;400: Invalid request&lt;/pre&gt;&lt;/noscript&gt;
&lt;script src=&quot;https://gist.github.com/1f16e99fc1b49cdd4be25adc9aaab025.js&quot;&gt; &lt;/script&gt;

&lt;p&gt;The powershell script takes 1 parameter: the channel name. Channel Name is the only input to PatchBay that decide where you &lt;code class=&quot;highlighter-rouge&quot;&gt;GET&lt;/code&gt; from/&lt;code class=&quot;highlighter-rouge&quot;&gt;POST&lt;/code&gt; to, so as long as no one share the same channel name with you, we can say the channel is yours.&lt;/p&gt;

&lt;p&gt;As you may have noticed, the script actually use &lt;code class=&quot;highlighter-rouge&quot;&gt;https://patchbay.pub/pubsub/&lt;/code&gt;, which is the pubsub mode of PatchBay, this means all PC running this script will receive data POSTed to the pubsub channel, not just 1 PC.&lt;/p&gt;

&lt;p&gt;I mainly POST stuff I wanna read later with curl from my joc PC to my home PC, if I really need it, I can also POST from my Android phone, working with PatchBay feels really nice and easy, because you can do Http &lt;code class=&quot;highlighter-rouge&quot;&gt;GET&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;POST&lt;/code&gt; everywhere as long as you are connected.&lt;/p&gt;

&lt;p&gt;The reason why I don’t use the actual PushBullet but this is that, I don’t want to login on my job PC, I’m the type that feels insecure and cares alot about my privacy. For people like me, things like PatchBat is really awesome, though it’s not actually “secure”, but its login-less nature is trully useful.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;EDIT 2021/09/22
It seems patchbay.pub is down :sad:&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;EDIT 2021/10/02
So I grabbed &lt;a href=&quot;https://github.com/schollz/duct&quot;&gt;duct&lt;/a&gt; and starting to host my own service for myself.&lt;/p&gt;

&lt;p&gt;I chose &lt;a href=&quot;vultr.com&quot;&gt;Vultr&lt;/a&gt; and deployed a machine and is now hosting the program on it. It was a fun and fresh experience, I learned about how domain name &amp;amp; dns works, how to setup linux systemd service, how to work with SElinux, etc. &lt;a href=&quot;/blog/posts/hosting-a-web-service-on-vultr/en&quot;&gt;Here is a blog post about it&lt;/a&gt;.&lt;/p&gt;</content><author><name>BA</name></author><category term="foss" /><category term="patchbay" /><category term="qol" /><summary type="html">PatchBay is a free and public service that “patch” Http GET and POST together. For example, you GET from https://patchbay.pub/123 and POST “321” to https://patchbay.pub/123, the GET side will receive “321”. Sounds boring, eh? But it could be the most clever thing I’ve seen these years, and it’s free for anyone to use without any authentication, which enable a lot of possibilities. I’ve made several personal tools based on PatchBay, for example, PushBullet: 400: Invalid request The powershell script takes 1 parameter: the channel name. Channel Name is the only input to PatchBay that decide where you GET from/POST to, so as long as no one share the same channel name with you, we can say the channel is yours. As you may have noticed, the script actually use https://patchbay.pub/pubsub/, which is the pubsub mode of PatchBay, this means all PC running this script will receive data POSTed to the pubsub channel, not just 1 PC. I mainly POST stuff I wanna read later with curl from my joc PC to my home PC, if I really need it, I can also POST from my Android phone, working with PatchBay feels really nice and easy, because you can do Http GET and POST everywhere as long as you are connected. The reason why I don’t use the actual PushBullet but this is that, I don’t want to login on my job PC, I’m the type that feels insecure and cares alot about my privacy. For people like me, things like PatchBat is really awesome, though it’s not actually “secure”, but its login-less nature is trully useful. EDIT 2021/09/22 It seems patchbay.pub is down :sad: EDIT 2021/10/02 So I grabbed duct and starting to host my own service for myself. I chose Vultr and deployed a machine and is now hosting the program on it. It was a fun and fresh experience, I learned about how domain name &amp;amp; dns works, how to setup linux systemd service, how to work with SElinux, etc. Here is a blog post about it.</summary></entry><entry><title type="html">Git Client: Fork Goes Brrrrr</title><link href="https://no3371.github.io/blog/posts/fork-goes-brrrrrrr/en" rel="alternate" type="text/html" title="Git Client: Fork Goes Brrrrr" /><published>2021-08-17T00:00:00+00:00</published><updated>2021-08-17T00:00:00+00:00</updated><id>https://no3371.github.io/blog/posts/fork-goes-brrrrrrr/fork-goes-brrrrrrr</id><content type="html" xml:base="https://no3371.github.io/blog/posts/fork-goes-brrrrrrr/en">&lt;p&gt;I’ve been a loyal GitKraken user for about 2-3 years… I love the UI/UX, love the experience, I recommended it to a lot of people… well, it’s a lot to me, I don’t really have friends, you need to understand.&lt;/p&gt;

&lt;p&gt;But! Here comes the “but”, GitKraken is notorious for its performance issue with big repo… &lt;a href=&quot;https://github.com/git-cola/git-cola/issues/48&quot;&gt;for at least 10 years&lt;/a&gt;. I work in a not-so-small company that we’d deal with huge projects, like tens of mbs of &lt;strong&gt;scripts&lt;/strong&gt; in the projects. It’s really a PITA for a long time to work with GitKraken for these repos.&lt;/p&gt;

&lt;p&gt;It just doesn’t work, nothing can justify the fact that it needs several seconds to display one single file… I mean, what the fuck? Even 🗒NotePad can do better than that, reading a file has nothing to do with git, right? I don’t know how I’ve been so patient these years.&lt;/p&gt;

&lt;p&gt;In the past, I sometimes searched for a alternative git client that looks and feels good like GitKraken, for me, UI/UX is important, or I’d rather to mess with git-cli training myself to become a git-guru. Unfortunately there’s none, I must say, none of them has UI as polished as GitKraken, so I never really gave a try to any.&lt;/p&gt;

&lt;p&gt;Finally, I got pissed off today, every click takes seconds, It’s a disaster and a insult to the money I pay every year to them. I went to the official &lt;a href=&quot;https://git-scm.com/downloads/guis&quot;&gt;GUI Clients&lt;/a&gt; page and did some shopping, eventually settled in &lt;a href=&quot;https://git-fork.com/&quot;&gt;Fork&lt;/a&gt;. On it’s official page it’s titled “Fast and Friendly” and it’s no advertisement but just honest bio, even the UI/UX is much better then I imagined!&lt;/p&gt;

&lt;p&gt;BTW, there’s something calls Ungit which is a web-based git client which runs on node js and that thing runs faster then GitKraken… man…&lt;/p&gt;</content><author><name>BA</name></author><category term="git" /><summary type="html">I’ve been a loyal GitKraken user for about 2-3 years… I love the UI/UX, love the experience, I recommended it to a lot of people… well, it’s a lot to me, I don’t really have friends, you need to understand. But! Here comes the “but”, GitKraken is notorious for its performance issue with big repo… for at least 10 years. I work in a not-so-small company that we’d deal with huge projects, like tens of mbs of scripts in the projects. It’s really a PITA for a long time to work with GitKraken for these repos. It just doesn’t work, nothing can justify the fact that it needs several seconds to display one single file… I mean, what the fuck? Even 🗒NotePad can do better than that, reading a file has nothing to do with git, right? I don’t know how I’ve been so patient these years. In the past, I sometimes searched for a alternative git client that looks and feels good like GitKraken, for me, UI/UX is important, or I’d rather to mess with git-cli training myself to become a git-guru. Unfortunately there’s none, I must say, none of them has UI as polished as GitKraken, so I never really gave a try to any. Finally, I got pissed off today, every click takes seconds, It’s a disaster and a insult to the money I pay every year to them. I went to the official GUI Clients page and did some shopping, eventually settled in Fork. On it’s official page it’s titled “Fast and Friendly” and it’s no advertisement but just honest bio, even the UI/UX is much better then I imagined! BTW, there’s something calls Ungit which is a web-based git client which runs on node js and that thing runs faster then GitKraken… man…</summary></entry><entry><title type="html">Unity Memory Leak With GooglePlay Plugins</title><link href="https://no3371.github.io/blog/posts/unity-memory-leak-with-google-play-plugins/en" rel="alternate" type="text/html" title="Unity Memory Leak With GooglePlay Plugins" /><published>2021-08-17T00:00:00+00:00</published><updated>2021-08-17T00:00:00+00:00</updated><id>https://no3371.github.io/blog/posts/unity-memory-leak-with-google-play-plugins/unity-memory-leak-with-google-play-plugins</id><content type="html" xml:base="https://no3371.github.io/blog/posts/unity-memory-leak-with-google-play-plugins/en">&lt;p&gt;So it seems if you have Google Play Plugins in your Unity project and you have &lt;strong&gt;Auto Resolution On Build&lt;/strong&gt; toggled on in Play Service Resolver (Android), everytime you build, some junk is left in the heap and counted in ManagedHeap.UsedSize.&lt;/p&gt;

&lt;p&gt;Unity will try to GC.Collect from time to time and that makes Editor freeze without any of the leak gets collected, FeelsBadMan.&lt;/p&gt;

&lt;p&gt;Unity 2018.4.35f1&lt;/p&gt;

&lt;p&gt;GooglePlayPlugins 1.5.0&lt;/p&gt;</content><author><name>BA</name></author><category term="unity" /><category term="pitfall" /><summary type="html">So it seems if you have Google Play Plugins in your Unity project and you have Auto Resolution On Build toggled on in Play Service Resolver (Android), everytime you build, some junk is left in the heap and counted in ManagedHeap.UsedSize. Unity will try to GC.Collect from time to time and that makes Editor freeze without any of the leak gets collected, FeelsBadMan. Unity 2018.4.35f1 GooglePlayPlugins 1.5.0</summary></entry><entry><title type="html">Unity 插件：Keep</title><link href="https://no3371.github.io/blog/posts/project-untiy-keep/tw" rel="alternate" type="text/html" title="Unity 插件：Keep" /><published>2021-05-10T00:00:00+00:00</published><updated>2021-05-10T00:00:00+00:00</updated><id>https://no3371.github.io/blog/posts/project-untiy-keep/project-untiy-keep</id><content type="html" xml:base="https://no3371.github.io/blog/posts/project-untiy-keep/tw">&lt;p&gt;Keep 是一套輔助插件，起因是因為我接手負責一個巨大的專案，檔案繁多、安排的方式又很不得我意，一直花很多時間在翻 Project 視窗，Asset Store 上的免費插件又不能滿足挑剔的我，所以決定自己寫一個簡單的點選歷史紀錄面板…一發不可收拾，又寫了好幾個面板，變成了一套完整的工具。&lt;/p&gt;

&lt;p&gt;自己邊使用邊開發了大概一個月，整體來說非常滿意，覺得好看又好用簡直回不去了，所以決定認真整理一下發布出來。&lt;/p&gt;

&lt;h2 id=&quot;讓-keep-改變你的習慣&quot;&gt;讓 Keep 改變你的習慣&lt;/h2&gt;

&lt;p&gt;我們可以將 Asset 以使用頻率/週期做一個分類：&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;剛才用到的 -&amp;gt; 「我剛才開的那個在哪？」&lt;/li&gt;
  &lt;li&gt;等一下/今天會用到的 -&amp;gt; 「要先做別的事，晚點再來改…」&lt;/li&gt;
  &lt;li&gt;在同一個專案中，今後總會用到的 -&amp;gt; 「每次都在找這個 Asset 有點煩啊？」&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Keep 提供 4 個工具面板來幫助你快速存取物件，意圖成為你不可或缺的夥伴，Recents 紀錄你剛剛點選了什麼，Laters 讓你暫存之後會用到的東西，Forevers 讓你永久保存常用的 Asset，再附帶一個 InMind——撥號鍵盤型的 Forevers，更小的面板上保存更多快速存取選項。&lt;/p&gt;

&lt;p&gt;Keep 會幫助你習慣將 Asset 依據重要程度、使用頻繁程度分級，漸漸地，在 Project 視窗裡東翻西找的時間將會大幅減少。&lt;/p&gt;

&lt;h2 id=&quot;keeprecents&quot;&gt;Keep.Recents&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;ldDjBkMiBx.gif&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Recents 是你的點選歷史，最後點選的物件會排在最上面（FIFO）。&lt;/li&gt;
  &lt;li&gt;Recents 會保存最近的 30 筆選項，但不提供捲動功能、不鼓勵你去回想「我剛剛點了什麼」，如果你真的有需要，你可以拉長介面。&lt;/li&gt;
  &lt;li&gt;Recents 經過優化，沒有顯示的選項不會繪製。&lt;/li&gt;
  &lt;li&gt;右鍵選項，可以將物件保存到 Laters；若 Laters 未開啟，會自動開啟 Laters；若 Laters 未開啟，但 Forevers 已開啟的情況，會保存到 Forevers。&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;keeplaters&quot;&gt;Keep.Laters&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;recents-to-laters.gif&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Laters 代表「你之後會用到的東西」，和 Recents 一樣是 FIFO 清單，隨著你的工作進行，不再需要的東西自然而然會消失在清單底部。&lt;/li&gt;
  &lt;li&gt;Laters 接收從 Recents「升級」保存的物件，也接受直接拖拉新增物件。&lt;/li&gt;
  &lt;li&gt;Laters 比 Recents 優化更佳，捲動視野外的選項幾乎不佔用繪製效能。&lt;/li&gt;
  &lt;li&gt;右鍵選項可以將物件保存到 Forevers。&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;keepforevers&quot;&gt;Keep.Forevers&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;forevers.gif&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Forevers 用來保存那些只要你還在做同一個專案，就總是會存取的東西，比如說遊戲的啟動場景、主選單 Prefab。Forevers 的選項在你右鍵移除之前會永遠存在。&lt;/li&gt;
  &lt;li&gt;Forevers 接受從 Laters 或 Recents「升級」保存的物件，也接受直接拖拉新增物件。&lt;/li&gt;
  &lt;li&gt;Forevers 和 Laters 使用了相等的優化，捲動視野外的選項幾乎不佔用繪製效能。&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;keepinmind&quot;&gt;Keep.InMind&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;3cVPjgb28U.gif&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;InMind 跟 Forevers 具有相同的功能，但是以 Dialpad 形式呈現，節省你珍貴的螢幕空間（real-e$tate）。相對的，InMind 要求你對物件的熟悉度更高，不需要多想就記得各個按鈕分別是什麼物件。&lt;/li&gt;
  &lt;li&gt;InMind 對每個新增的物件提供 UID 標記，直到你使用視窗選單中 FullReset 功能之前，每個按鈕都會有一個獨一無二的編號，幫助你記憶。&lt;/li&gt;
  &lt;li&gt;即使一時記不住也沒關係，在滑鼠指向按鈕時，視窗下方會顯示物件名稱。&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;推薦的面板排列&quot;&gt;推薦的面板排列&lt;/h2&gt;
&lt;p&gt;透過將四個面板排成一條線，由低至高對於物件的重要性一目了然，右鍵時升級（escalate）的概念也更明確。
&lt;img src=&quot;snipaste_20210511_002243.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;unity-keep&quot;&gt;&lt;a href=&quot;https://github.com/BA-Studio/Unity-Keep&quot;&gt;Unity-Keep&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;沒賣過東西本來想感受一下，才發現現在 Asset Store 有最低 4.99 售價的限制…而且還要準備說明文件檔案…&lt;/p&gt;

&lt;p&gt;我太懶了，而且這東西沒什麼料，&lt;del&gt;不讓我便宜賣，只好開源&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;順手給個星星吧！&lt;/p&gt;</content><author><name>BA</name></author><category term="unity" /><category term="diy" /><summary type="html">Keep 是一套輔助插件，起因是因為我接手負責一個巨大的專案，檔案繁多、安排的方式又很不得我意，一直花很多時間在翻 Project 視窗，Asset Store 上的免費插件又不能滿足挑剔的我，所以決定自己寫一個簡單的點選歷史紀錄面板…一發不可收拾，又寫了好幾個面板，變成了一套完整的工具。</summary></entry><entry><title type="html">寫一個自己愛不釋手的工具：Obsidian Regex Pipeline</title><link href="https://no3371.github.io/blog/posts/I-built-something-i-love-to-use-obsidian-regex-pipeline/tw" rel="alternate" type="text/html" title="寫一個自己愛不釋手的工具：Obsidian Regex Pipeline" /><published>2021-05-07T00:00:00+00:00</published><updated>2021-05-07T00:00:00+00:00</updated><id>https://no3371.github.io/blog/posts/I-built-something-i-love-to-use-obsidian-regex-pipeline/I-built-something-i-love-to-use-obsidian-regex-pipeline</id><content type="html" xml:base="https://no3371.github.io/blog/posts/I-built-something-i-love-to-use-obsidian-regex-pipeline/tw">&lt;h2 id=&quot;obsidian&quot;&gt;Obsidian&lt;/h2&gt;
&lt;p&gt;自從開始使用 &lt;a href=&quot;https://obisidian.md&quot;&gt;Obsidian&lt;/a&gt; 以來，也超過半年了。一開始是抱著嘗試新東西的心態，剛好要學日文就拿來收納整理日文筆記，很快就愛上了這東西，一邊學習新知識一邊建立筆記，充實自己的資料庫的感覺，讓我這個數位倉鼠症患者實在是快樂得停不下來，有些下班後的夜晚坐下來編修筆記，轉眼就到了睡覺時間…&lt;/p&gt;

&lt;p&gt;Obsidian 是一套網路化知識管理工具，是近年變得比較熱門的一種工具類型，其始祖是 Roam Research。這類工具的特色是基於知識具有關聯性的理念，使用者在編寫筆記的時候，標註筆記與筆記之間的關聯，而它們可以計算筆記之間的關聯，視覺化地呈現出一個網路圖表！隨著我們填入越多筆記，資料庫網路就會對我們越來越有價值，成為我們的虛擬大腦、外接記憶儲存空間，更棒的是在這個過程中，借助筆記之間的彼此連結，我們對於一個知識體系的學習效率也會大幅提高。&lt;/p&gt;

&lt;p&gt;Obsidian 真的非常棒！但今天我要說的是我自己寫了一個插件的故事…（是的！Obisidian 支援第三方插件，太棒了）&lt;/p&gt;

&lt;h2 id=&quot;監修筆記很花時間&quot;&gt;監修筆記很花時間&lt;/h2&gt;
&lt;p&gt;這半年來持續投入時間的結果就是我有了一個超大又井井有條的日文筆記資料庫，再來就是我開始覺得手動調整格式很煩！&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;Obsidian_kHYkCZgx4i.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;隨便舉個例子，這是我從 goo 辭書上使用 Firefox 的 MardDownload 插件抓下來的&lt;a href=&quot;https://dictionary.goo.ne.jp/word/%E8%A8%88%E3%82%8B/&quot;&gt;計る&lt;/a&gt;條目的內容：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# 計る／量る／測る／図る／謀る／諮る（はかる）の意味 - goo国語辞書

はか・る【計る／量る／測る／図る／謀る／諮る】

の解説


------------------------------
［動ラ五（四）］《「[はか](https://dictionary.goo.ne.jp/word/%E8%A8%88_%28%E3%81%AF%E3%81%8B%29/#jn-174670)」に活用語尾の付いたもの》

1.  **１** （計る・測る・量る）
    
    1.  ㋐ある基準をもとにして物の度合いを調べる。特に、はかり・ゲージなどの計測機器で測定する。「體溫を─・る」「距離を─・る」
        
    2.  ㋑推しはかって見當をつける。おもんぱかる。忖度 (そんたく) する。「己をもって人を─・る」「真意を─・りかねる」
        

1.  **２** （図る・謀る）
    
    1.  ㋐物事を考え合わせて判斷する。見はからう。「時期を─・る」「敵情を─・る」
        
    2.  ㋑企てる。もくろむ。「自殺を─・る」
        

1.  **３** （謀る）
    
    1.  ㋐はかりごとをする。たくらむ。「悪事を─・る」
        
    2.  ㋑あざむく。たばかる。「さては─・られたか」
        

1.  **４** （図る）
    
    1.  ㋐くふうして努力する。「再起を─・る」「利益を─・る」
        
    2.  ㋑うまく處理する。とりはからう。「便宜を─・る」
        

1.  **５** （諮る）相談する。「會議に─・って決める」
    

\[補説\]**1**㋐について、「計る」は時間・數、「測る」は長さ・高さ・深さ・広さ・程度、「量る」は重さ・容積を調べる際に使うことが多い。

\[可能\]**はかれる**

類語

-   [計る(はかる)](https://dictionary.goo.ne.jp/word/%E8%A8%88%E3%82%8B//#jn-174852)
-   [測る(はかる)](https://dictionary.goo.ne.jp/word/%E8%A8%88%E3%82%8B//#jn-174852)

関連語

-   [計測(けいそく)](https://dictionary.goo.ne.jp/word/%E8%A8%88%E6%B8%AC/#jn-66796)
-   [目測(もくそく)](https://dictionary.goo.ne.jp/word/%E7%9B%AE%E6%B8%AC/#jn-218932)
-   [目份量(めぶんりょう)](https://dictionary.goo.ne.jp/word/%E7%9B%AE%E5%88%86%E9%87%8F/#jn-217869)

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;比對一下原始網頁，會發現有一些奇怪的地方，比如網站上的數字清單沒有辦法正確捕捉；另外，對於筆記的格式我們可能有一些要求，比如說去除空行、冗餘文字。&lt;/p&gt;

&lt;p&gt;在 Obsidian 中渲染出來的結果是這樣：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;rendered.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;不可接受、絕對不可接受。&lt;/p&gt;

&lt;p&gt;來看看要整理這則筆記我要做多少動作：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;manual.gif&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;做一個養活自己的成熟工程師&quot;&gt;做一個養活自己的成熟工程師&lt;/h2&gt;

&lt;p&gt;是時候展現我真正的實力了！&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;using_pipeline.gif&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;這就是我為了飛速監修而寫的插件 &lt;a href=&quot;https://github.com/No3371/obsidian-regex-pipeline&quot;&gt;Regex Pipleline&lt;/a&gt;，利用預先定義的 Regex 取代規則，快速調整筆記內容。&lt;/p&gt;

&lt;p&gt;Regex 是一種強大的魔法咒語，看得懂之前只覺得機哩咕嚕眼花撩亂，會用之後就覺得自己簡直是文字魔法師…&lt;/p&gt;

&lt;p&gt;goo 辭書的格式化 rule set 大概是這樣的，把這東西寫出來之後，這麼多 regex replacement 就會自動執行了，簡直是巫術：&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&quot;\!\[\]\(https://dictionary\.goo\.ne\.jp/img/daijisen/gaiji/02539\.gif\)&quot;-&amp;gt;&quot;![[@1.gif]]&quot;
&quot;\!\[\]\(https://dictionary\.goo\.ne\.jp/img/daijisen/gaiji/02540\.gif\)&quot;-&amp;gt;&quot;![[@2.gif]]&quot;
&quot;\!\[\]\(https://dictionary\.goo\.ne\.jp/img/daijisen/gaiji/02541\.gif\)&quot;-&amp;gt;&quot;![[@3.gif]]&quot;
&quot;\!\[\]\(https://dictionary\.goo\.ne\.jp/img/daijisen/gaiji/02542\.gif\)&quot;-&amp;gt;&quot;![[@4.gif]]&quot;
&quot;\!\[\]\(https://dictionary\.goo\.ne\.jp/img/daijisen/gaiji/02543\.gif\)&quot;-&amp;gt;&quot;![[@5.gif]]&quot;
&quot;\!\[\]\(https://dictionary\.goo\.ne\.jp/img/daijisen/gaiji/02544\.gif\)&quot;-&amp;gt;&quot;![[@6.gif]]&quot;

::This fix example sentence right after a topic
&quot;［(.+?)］(.+)\n\n1\.  1\.  「&quot;-&amp;gt;&quot;［$1］$2
&amp;gt;「&quot;

::This fix example sentence right after a topic
&quot;［(.+?)］(.+)\n\n-   「&quot;-&amp;gt;&quot;［$1］$2
&amp;gt;「&quot;


::This extract entry name from the title
&quot;^#\s.+goo国語辞書\n+(.+)\n+の解説\n+\-+&quot;-&amp;gt;&quot;# $1&quot;

::This extract titles for sub entries2
&quot;(.+?)\n\nの解説\n+?\-+&quot;-&amp;gt;&quot;---
# $1&quot;

:: This convert these lines to headers
&quot;^類語&quot;-&amp;gt;&quot;#### 類語&quot;
&quot;^関連語&quot;-&amp;gt;&quot;#### 関連語&quot;
&quot;^下接句&quot;-&amp;gt;&quot;#### 下接句&quot;

:: Convert all second level single example sentence
&quot;    [\n\s]?    1\.\s+「(?!.+\n\s+?2\.)&quot;-&amp;gt;&quot;    &amp;gt;「&quot;

:: These 2 fix arrow reference
&quot;    &amp;gt;→\[(.+?)\]\((.+)\)［(.+?)］&quot;-&amp;gt;&quot;    →[$1]($2)［$3］&quot;
&quot;    1\.  →\[(.+?)\]\((.+)\)［(.+?)］&quot;-&amp;gt;&quot;    →[$1]($2)［$3］&quot;

:: This fix \n\n    → to \n    →
&quot;[\n\s]+?(?=    →\[.+?\]\(.+\)［.+?］)&quot;-&amp;gt;&quot;
&quot;


&quot;^        「&quot;-&amp;gt;&quot;        &amp;gt;「&quot;

:: This fix wrong bullets captured by [MardDownload](github.com/deathau/markdownload)
&quot;^1\.  \*\*１\*\*&quot;-&amp;gt;&quot;1. &quot;
&quot;^1\.  \*\*２\*\*&quot;-&amp;gt;&quot;2. &quot;
&quot;^1\.  \*\*３\*\*&quot;-&amp;gt;&quot;3. &quot;
&quot;^1\.  \*\*４\*\*&quot;-&amp;gt;&quot;4. &quot;
&quot;^1\.  \*\*５\*\*&quot;-&amp;gt;&quot;5. &quot;
&quot;^1\.  \*\*６\*\*&quot;-&amp;gt;&quot;6. &quot;
&quot;^1\.  \*\*７\*\*&quot;-&amp;gt;&quot;7. &quot;
&quot;^1\.  \*\*８\*\*&quot;-&amp;gt;&quot;8. &quot;
&quot;^1\.  \*\*９\*\*&quot;-&amp;gt;&quot;9. &quot;
&quot;^1\.  \*\*１０\*\*&quot;-&amp;gt;&quot;10. &quot;
&quot;^1\.  \*\*１１\*\*&quot;-&amp;gt;&quot;11. &quot;
&quot;^1\.  \*\*１２\*\*&quot;-&amp;gt;&quot;12. &quot;
&quot;^1\.  \*\*１３\*\*&quot;-&amp;gt;&quot;13. &quot;
&quot;^1\.  \*\*１４\*\*&quot;-&amp;gt;&quot;14. &quot;
&quot;^1\.  \*\*１５\*\*&quot;-&amp;gt;&quot;15. &quot;
&quot;^1\.  \*\*１６\*\*&quot;-&amp;gt;&quot;16. &quot;
&quot;^1\.  \*\*１７\*\*&quot;-&amp;gt;&quot;17. &quot;
&quot;^1\.  \*\*１８\*\*&quot;-&amp;gt;&quot;18. &quot;
&quot;^1\.  \*\*１９\*\*&quot;-&amp;gt;&quot;19. &quot;
&quot;^1\.  \*\*２０\*\*&quot;-&amp;gt;&quot;20. &quot;
&quot;^1\.  \*\*２１\*\*&quot;-&amp;gt;&quot;21. &quot;
&quot;^1\.  \*\*２２\*\*&quot;-&amp;gt;&quot;22. &quot;
&quot;^1\.  \*\*２３\*\*&quot;-&amp;gt;&quot;23. &quot;
&quot;^1\.  \*\*２４\*\*&quot;-&amp;gt;&quot;24. &quot;
&quot;^1\.  \*\*２５\*\*&quot;-&amp;gt;&quot;25. &quot;
&quot;^1\.  \*\*２６\*\*&quot;-&amp;gt;&quot;26. &quot;
&quot;^1\.  \*\*２７\*\*&quot;-&amp;gt;&quot;27. &quot;
&quot;^1\.  \*\*２８\*\*&quot;-&amp;gt;&quot;28. &quot;
&quot;^1\.  \*\*２９\*\*&quot;-&amp;gt;&quot;29. &quot;
&quot;^1\.  \*\*３０\*\*&quot;-&amp;gt;&quot;30. &quot;
&quot;^(\d+?)\.  &quot;-&amp;gt;&quot;$1. &quot;

:: This fix 2 space after bullets
&quot;    (\d+?)\.  &quot;-&amp;gt;&quot;    $1. &quot;
::This clears empty lines.
&quot;\n\s+?\n    (\d+?)\. &quot;-&amp;gt;&quot;
    $1. &quot;
::This clears empty lines.
&quot;\n\s+?\n        &amp;gt;「&quot;-&amp;gt;&quot;
    &amp;gt;「&quot;

::This clears empty lines.
&quot;^\s+\n(\d+)\.&quot;-&amp;gt;&quot;$1.&quot;

&quot;    (\d+?)\. 「&quot;-&amp;gt;&quot;    $1. &amp;gt;「&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;obsidian-的插件不難寫&quot;&gt;Obsidian 的插件不難寫&lt;/h2&gt;

&lt;p&gt;Obsidian 的插件 API 很不錯！其實我不常做這種事情，JS/TS 也算是滿生疏的一個領域，但仔細觀察了一下之後還是很容易上手了。個人心得是不像一般為了推出 API 而推出 API，實際使用上，感覺官方有認真在思考，根據開發者可能會有的需求去設計實用方便的 API。&lt;/p&gt;

&lt;p&gt;比如，我本來預期，這類型的 API 會提供我「現在選取的文字開頭&amp;amp;結尾的 Index」，但它實際上直接提供了一個 &lt;code class=&quot;highlighter-rouge&quot;&gt;getSelection()&lt;/code&gt; 可以取得完整的已選取文字，還提供了 &lt;code class=&quot;highlighter-rouge&quot;&gt;replaceSelection()&lt;/code&gt; 讓你直接替換掉以選取的文字，相關的還有 &lt;code class=&quot;highlighter-rouge&quot;&gt;somethingSelected()&lt;/code&gt;… 可以說是相當高階且人性化的 API 了，插件作者完全可以 Focus 在實現插件功能。&lt;/p&gt;

&lt;p&gt;範例插件的架構也是簡單，且參數、變數、方法的命名可讀性高，我一看就大概就能對照 Obsidian 的介面看出代表什麼東西。&lt;/p&gt;

&lt;p&gt;我算是對 TS/JS 這種以操作 DOM 來呈現畫面的機制很不熟的，但看了看範例的作法，大概就知道了要怎麼實作畫面元件。&lt;/p&gt;

&lt;p&gt;作為一個 Electron App，用 Console 開發除錯也是輕輕鬆鬆。&lt;/p&gt;

&lt;h2 id=&quot;插件審核&quot;&gt;插件審核&lt;/h2&gt;
&lt;p&gt;想要發布插件，讓插件會在 Obsidian 內建的第三方插件搜尋清單中出現，必須向 &lt;em&gt;Obsidian-Releases&lt;/em&gt; 提交 PR，&lt;a href=&quot;https://github.com/obsidianmd/obsidian-releases/pull/239#issuecomment-817929015&quot;&gt;例&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;官方的開發者會認真的看過你的程式碼之後才 Merge，整體來說是不錯的經驗。&lt;/p&gt;</content><author><name>BA</name></author><category term="foss" /><summary type="html">Obsidian 自從開始使用 Obsidian 以來，也超過半年了。一開始是抱著嘗試新東西的心態，剛好要學日文就拿來收納整理日文筆記，很快就愛上了這東西，一邊學習新知識一邊建立筆記，充實自己的資料庫的感覺，讓我這個數位倉鼠症患者實在是快樂得停不下來，有些下班後的夜晚坐下來編修筆記，轉眼就到了睡覺時間…</summary></entry><entry><title type="html">Jekyll: Make it Multi-Lingual</title><link href="https://no3371.github.io/blog/posts/jekyll-make-it-multilingual/en" rel="alternate" type="text/html" title="Jekyll: Make it Multi-Lingual" /><published>2021-05-07T00:00:00+00:00</published><updated>2021-05-07T00:00:00+00:00</updated><id>https://no3371.github.io/blog/posts/jekyll-make-it-multilingual/jekyll-make-it-multilingual</id><content type="html" xml:base="https://no3371.github.io/blog/posts/jekyll-make-it-multilingual/en">&lt;p&gt;As you may have noticed, this blog has basic level of support of multilingualism. There’re several plugins out there to help us creating multi-lingual jekyll sites, but I eventually decided to make it simple. This blog’s multilingualism is achieved with liquid tags, front matters, also a amazing plugin called &lt;a href=&quot;https://github.com/ample/jekyll-placeholders&quot;&gt;jekyll-placeholders&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Our objectives here are:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;To enble publishing posts in different lanaguages, all by Jekyll’s functionality, without javascript.&lt;/li&gt;
  &lt;li&gt;It should be an addition not a requirement, so it should be okay to publish posts in whatever and any number of languages.&lt;/li&gt;
  &lt;li&gt;It should be easy to navigate between languages.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;What we can take advantages of:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;We can add whatever we want as &lt;a href=&quot;https://jekyllrb.com/docs/front-matter/&quot;&gt;Front Matter&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;With &lt;a href=&quot;https://github.com/ample/jekyll-placeholders&quot;&gt;jekyll-placeholders&lt;/a&gt;, any Front Matter could be used in &lt;a href=&quot;https://jekyllrb.com/docs/permalinks/&quot;&gt;Permalink&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Front Matters are accessible in Liquid tags, this allows us to know what languages are available for a post in Layouts/Includes.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;generate-posts-of-languages&quot;&gt;Generate Posts of Languages&lt;/h2&gt;

&lt;p&gt;The Front Matter of this post is shown below:&lt;/p&gt;
&lt;div class=&quot;language-markdown highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nn&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;layout&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;post&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Jekyll:&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Make&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Multi-Lingual&quot;&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;tags&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;foss&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;published&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;language&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;en&lt;/span&gt;
&lt;span class=&quot;nn&quot;&gt;---&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As you can see, I specified the &lt;strong&gt;language&lt;/strong&gt; entry, which contains “en”, this means, this post is written in “en” (It doesn’t matter what language it actually is, it’s just a variable).&lt;/p&gt;

&lt;p&gt;As for now, the post is only in English, if in the future I write another version in, for example “tw”, then it’d become:&lt;/p&gt;
&lt;div class=&quot;language-markdown highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nn&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;layout&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;post&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Jekyll:&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Make&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Multi-Lingual&quot;&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;tags&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;foss&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;published&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;false&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;language&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;en&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;other_language_versions&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;jekyll-make-it-multilingual/2021-05-31-jekyll-make-it-multilingual.md=tw&lt;/span&gt;
&lt;span class=&quot;nn&quot;&gt;---&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A &lt;code class=&quot;highlighter-rouge&quot;&gt;other_language_versions&lt;/code&gt; front matter is added, and it’s in “path_relative_to_post=lang” format. This entry will be used by Liquid to generate buttons to navigate between language versions, I’ll show how to achieve that in the next section.&lt;/p&gt;

&lt;p&gt;And this is my post permalink:&lt;/p&gt;
&lt;div class=&quot;language-markdown highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;collections:
  posts:
    output: true
    permalink: posts/:title/:language
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Thanks to &lt;a href=&quot;https://github.com/ample/jekyll-placeholders&quot;&gt;jekyll-placeholders&lt;/a&gt;, I can reference the &lt;strong&gt;language&lt;/strong&gt; Front Matter here, so when Jekyll compiles the site, this post would be &lt;code class=&quot;highlighter-rouge&quot;&gt;posts/2021-05-07-jekyll-make-it-multilingual/en.html&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;By the way, The reason why I decide to place language at the tail is, It’d much easier to select langugage by url, though my site’d be very easy to switch language by buttons, It’s still a good thing to do.&lt;/p&gt;

&lt;h2 id=&quot;show-the-lanaguage-options&quot;&gt;Show The Lanaguage Options&lt;/h2&gt;

&lt;p&gt;In my home layout, this is how my post items are rendered:&lt;/p&gt;
&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;li&amp;gt;&lt;/span&gt;
          {%- assign date_format = site.moving.date_format | default: &quot;%b %-d, %Y&quot; -%} // My site is based on [Moving](https://github.com/huangyz0918/moving) theme
          &lt;span class=&quot;nt&quot;&gt;&amp;lt;span&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;post-meta&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; // Show the date of the post
            {{ post.date | date: date_format }}
          &lt;span class=&quot;nt&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;black-link post-link-layout&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;{{ post.url | prepend: site.baseurl}}&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; // How it links to the acutal post page
            {{ post.title | escape }}
          &lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
          {%- if post.language -%} // If the post has **language** front matter
              &lt;span class=&quot;nt&quot;&gt;&amp;lt;span&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;language_tag&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;{{ post.language | upcase }}&lt;span class=&quot;nt&quot;&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; // en -&amp;gt; EN
          {%- endif -%}
          {%- if post.other_language_versions.size &amp;gt; 0 -%} // If the post has **other_language_versions** front matter
            {%- for L in post.other_language_versions -%} // Iterate through all options
              {%- assign data =  L | split: &quot;=&quot;  -%} // Split the entry, take jekyll-make-it-multilingual/2021-05-31-jekyll-make-it-multilingual.md=tw as example, data[0] will be jekyll-make-it-multilingual/2021-05-31-jekyll-make-it-multilingual.md and data[1] will be tw.
              &lt;span class=&quot;nt&quot;&gt;&amp;lt;span&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;language_option&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;{% link _posts/{{ data[0] }} %}&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;{{ data[1] | upcase }}&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&amp;lt;/span&amp;gt;&lt;/span&gt; // We use **link** here, so Jekyll will do the job for us to get the actual link, data[1] is showing what language version the button leads to
            {%- endfor -%}
          {%- endif -%}
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;/li&amp;gt;&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Just after these steps, We can present posts in multiple languages.&lt;/p&gt;</content><author><name>BA</name></author><category term="foss" /><summary type="html">As you may have noticed, this blog has basic level of support of multilingualism. There’re several plugins out there to help us creating multi-lingual jekyll sites, but I eventually decided to make it simple. This blog’s multilingualism is achieved with liquid tags, front matters, also a amazing plugin called jekyll-placeholders.</summary></entry></feed>